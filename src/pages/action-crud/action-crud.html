<div *ngIf="showAnimate" class="send-animate">
    <img src="assets/images/send-manada.gif?r={{model.actionID}}" />
</div>
<ion-header>
    <ion-navbar>
        <ion-buttons start class="custom-order">
            <button ion-button (click)="dismiss()">
                <span ion-text color="primary" showWhen="ios">Cancel</span> 
                <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
            </button>
        </ion-buttons>
        <ion-buttons end>
            <button class="fontcolor2" [disabled]="isBusy" (click)="send()" ion-button icon-right>
                Send
                <ion-icon name="send"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>
<ion-content fixed>
    <div #subject class="subject-action" contenteditable="true" placeholder="Describe the action"></div>
    <ion-item (touchstart)="calendar()" class="custom-row-autocomplete">
        <label>Due date</label>
        <span class="no-border">{{model.dueDate}}</span>
    </ion-item>
    <ion-item text-wrap class="custom-row-autocomplete">
        <label>To</label>
        <p>
            <span *ngFor="let user of model.assignedUsers">{{user.names}}</span>
            <input autocomplete="off" #inputname [(ngModel)]="username" (input)="displayUsers($event)" (keyup)="removeLast($event)" type="text"
                name="username" />
        </p>
    </ion-item>
    <ion-item *ngIf="users.length > 0">
        <ion-list class="custom-list-users">
            <button *ngFor="let user of users" (touchstart)="addUser($event, user)" ion-item detail-none type="button">{{user.names}}</button>
        </ion-list>
    </ion-item>
    <ion-item text-wrap class="custom-row-autocomplete">
        <label>Project</label>
        <p>
            <span *ngFor="let project of model.projects">{{project.name}}</span>
            <input autocomplete="off" [(ngModel)]="projectname" (input)="displayProjects($event)" (keyup)="removeLastProject($event)"
                type="text" name="username" />
        </p>
    </ion-item>
    <ion-item *ngIf="projects.length > 0">
        <ion-list class="custom-list-users">
            <button *ngFor="let project of projects" (touchstart)="addProject($event, project)" ion-item detail-none type="button">{{project.name}}</button>
        </ion-list>
    </ion-item>        
    <div class="custom-attach-button">
        <button ion-button clear icon-left (click)="attach($event)">        
            <ion-icon name="icon-clip"></ion-icon>
        </button>
    </div>
    <ion-list class="custom-list-files">
        <ion-item *ngFor="let file of model.files">
            <ion-avatar item-start>
                <img [src]="rootPath + file.path">
            </ion-avatar>
            <h2>{{file.name}}</h2>
            <button [disabled]="isBusy" (touchstart)="removeFile($event, file)" ion-button clear item-end>
                <ion-icon color="danger" name="trash"></ion-icon>
            </button>
        </ion-item>
    </ion-list>
</ion-content>